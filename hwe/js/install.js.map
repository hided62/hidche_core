{"version":3,"file":"install.js","mappings":"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","sources":["webpack://hidche_lib/webpack/runtime/chunk loaded","webpack://hidche_lib/./hwe/ts/util/mergeKVArray.ts","webpack://hidche_lib/./hwe/ts/util/jqValidateForm.ts","webpack://hidche_lib/./hwe/ts/util/convertFormData.ts","webpack://hidche_lib/./hwe/ts/install.ts","webpack://hidche_lib/./hwe/ts/util/setAxiosXMLHttpRequest.ts","webpack://hidche_lib/webpack/bootstrap","webpack://hidche_lib/webpack/runtime/compat get default export","webpack://hidche_lib/webpack/runtime/define property getters","webpack://hidche_lib/webpack/runtime/global","webpack://hidche_lib/webpack/runtime/hasOwnProperty shorthand","webpack://hidche_lib/webpack/runtime/make namespace object","webpack://hidche_lib/webpack/runtime/node module decorator","webpack://hidche_lib/webpack/runtime/runtimeId","webpack://hidche_lib/webpack/runtime/jsonp chunk loading","webpack://hidche_lib/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import { isString } from \"lodash\";\n\ninterface NameValuePair {\n    name: string,\n    value: string\n}\n\nexport function mergeKVArray(array : NameValuePair[]):Record<string, string|string[]>{\n    const result:Record<string, string|string[]> = {};\n\n    for(const {name, value} of array){\n        if(!isString(name)){\n            throw new TypeError(`${name} is not string`);\n        }\n        if(!isString(value)){\n            throw new TypeError(`${value} is not string`);\n        }\n\n        if(name === '' || name === '[]'){\n            continue;\n        }\n        if(name.length > 2 && name.slice(-2) == '[]'){\n            const keyHead = name.slice(0, -2);\n            if(!(keyHead in result)){\n                result[keyHead] = [value];\n            }\n            else{\n                (result[keyHead] as string[]).push(value);\n            }\n            continue;\n        }\n        result[name] = value;\n    }\n    return result;\n}","import Schema, { Rules, Values } from \"async-validator\";\nimport { isArray } from \"lodash\";\nimport { mergeKVArray } from \"./mergeKVArray\";\nimport $ from 'jquery';\n\ntype Option = {\n    preParse?: ($target?: JQuery<HTMLElement>)=>void,\n    postParse?: (values:Record<string, string | string[]>, $target?: JQuery<HTMLElement>)=>[Record<string, string | string[]>, Map<string, string>]\n}\n\nexport class JQValidateForm {\n    public readonly validator: Schema;\n    public readonly inputs: JQuery<HTMLElement>;\n    constructor(public readonly target: JQuery<HTMLElement>, public readonly rule: Rules, public readonly option?:Option) {\n        this.validator = new Schema(rule);\n        this.inputs = target.find(':input');\n    }\n\n    public clearErrMsg():void {\n        this.inputs.removeClass('is-invalid');\n        this.inputs.removeClass('is-valid');\n        this.target.find('.invalid-feedback').detach();\n    }\n\n    public installChangeHandler():this{\n        this.inputs.on('change', ()=>{\n            void this.validate();\n        });\n        return this;\n    }\n\n    public async validate(): Promise<undefined | Values> {\n        if(this.option?.preParse !== undefined){\n            this.option.preParse(this.target);\n        }\n        let rawValues = mergeKVArray(this.inputs.serializeArray());\n        let optMap: Map<string, string>;\n        if(this.option?.postParse !== undefined){\n            [rawValues, optMap] = this.option.postParse(rawValues, this.target);\n        }\n        else{\n            optMap = new Map();\n        }\n        console.log(rawValues);\n\n        const validateResult = await this.validator.validate(rawValues).catch(({ fields }) => {\n            this.clearErrMsg();\n            for(const rawKey of Object.keys(fields)){\n                let $item: JQuery<HTMLElement>;\n                const key = rawKey.split('.')[0];\n                console.log(`ErrorType: ${key}:${rawValues[key]}`);\n                const errMsg = fields[rawKey][0].message;\n\n                if(optMap.has(key)){\n                    $item = this.target.find(optMap.get(key) as string);\n                }\n                else if(isArray(rawValues[key])){\n                    $item = this.target.find(`:input[name='${key}[]']`);\n                }\n                else{\n                    $item = this.target.find(`:input[name='${key}']`);\n                }\n\n                if($item.length == 0){\n                    continue;\n                }\n\n                const $error = $(`<span>${errMsg}</span>`);\n\n                $error.addClass( \"invalid-feedback\" );\n\n                if (\"radio\" == $item.prop( \"type\" )) {\n                    const $target = $item.parents( \".btn-group\" );\n                    $error.insertAfter( $target );\n                    $target.addClass('is-invalid');\n                }\n                else if (\"checkbox\" == $item.prop( \"type\" )) {\n                    let $target = $item.parent( \"label\" );\n                    if($target.parent(\".btn-group\").length){\n                       $target = $target.parent('.btn-group');\n                    }\n                    $error.insertAfter( $target );\n                    $target.addClass('is-invalid');\n                } else {\n                    $error.insertAfter( $item );\n                    $item.addClass('is-invalid');\n\n                }\n            }\n\n            this.inputs.each(function(){\n                const name = (this as HTMLInputElement).name;\n                if(name in fields){\n                    return;\n                }\n                this.classList.add('is-valid');\n            });\n            return undefined;\n        });\n        if(validateResult === undefined){\n            return undefined;\n        }\n        this.clearErrMsg();\n        this.inputs.addClass('is-valid');\n        return validateResult;\n    }\n}","import { isArray, isString, isNumber, isBoolean } from \"lodash\";\n\nexport function convertFormData(values: Record<string, number[]|string[]|boolean[]|number|string|boolean>): FormData{\n    const formData = new FormData();\n\n    const simpleConv = (v: unknown):string=>{\n        if(isString(v)){\n            return v;\n        }\n        if(isNumber(v)){\n            return v.toString();\n        }\n        if(isBoolean(v)){\n            return v?'true':'false';\n        }\n        throw new TypeError('지원하지 않는 formData Type');\n    }\n\n    for(const [key, value] of Object.entries(values)){\n        if(isArray(value)){\n            const arrKey = `${key}[]`;\n            for(const subValue of value){\n                formData.append(arrKey, simpleConv(subValue));\n            }\n            continue;\n        }\n\n        formData.append(key, simpleConv(value));\n    }\n\n    return formData;\n}","import $ from \"jquery\";\nimport 'bootstrap';\nimport { setAxiosXMLHttpRequest } from \"./util/setAxiosXMLHttpRequest\";\nimport axios from \"axios\";\nimport { InvalidResponse } from \"./defs\";\nimport { Rules } from \"async-validator\";\nimport { JQValidateForm } from \"./util/jqValidateForm\";\nimport { convertFormData } from \"./util/convertFormData\";\n\ntype ResponseScenarioItem = {\n    year?: number,\n    title: string,\n    npc_cnt: number,\n    npcEx_cnt: number,\n    npcNeutral_cnt: number,\n    nation: Record<number, {\n        id: number,\n        name: string,\n        color: string,\n        gold: number,\n        rice: number,\n        infoText: string,\n        tech: number,\n        type: string,\n        nationLevel: number,\n        cities: string[],\n        generals: number,\n        generalsEx: number,\n        generalsNeutral: number\n    }>\n}\n\ntype ExpandedScenarioItem = ResponseScenarioItem & {\n    category: string,\n    idx: string,\n    year: number,\n}\n\ntype ResponseScenario = {\n    result: true,\n    scenario: Record<number, ResponseScenarioItem>\n}\n\nasync function loadScenarios() {\n\n    let result: InvalidResponse | ResponseScenario;\n    try {\n        const response = await axios({\n            url: 'j_load_scenarios.php',\n            method: 'post',\n            responseType: 'json'\n        });\n        result = response.data;\n    }\n    catch (e) {\n        alert(`시나리오를 불러오는데 실패했습니다.: ${e}`);\n        return;\n    }\n\n    if (!result.result) {\n        alert(result.reason);\n        return;\n    }\n\n    const list: Record<string, Record<string, ExpandedScenarioItem>> = {};\n    const pat = /【(.*?)[0-9\\-_.a-zA-Z]*】/;\n\n    for (const [idx, value] of Object.entries(result.scenario)) {\n        const title = value.title || \"-\";\n        const categoryRes = pat.exec(title);\n        const category = categoryRes ? categoryRes[1] : '-';\n\n        if (!(category in list)) {\n            list[category] = {};\n        }\n\n        list[category][idx] = {\n            ...value,\n            title: title,\n            category: category,\n            idx: idx,\n            year: value.year ?? 180\n        };\n    }\n\n\n    const $select = $('#scenario_sel');\n    for (const [category, items] of Object.entries(list)) {\n        const $optgroup = $('<optgroup>').attr('label', category);\n        for (const [idx, scenario] of Object.entries(items)) {\n            const $option = $('<option>')\n                .data('scenario', scenario)\n                .val(idx)\n                .html(scenario.title);\n            $optgroup.append($option);\n        }\n        $select.append($optgroup);\n\n    }\n\n    $select.val(0);\n    $select.trigger('change');\n}\n\nfunction scenarioPreview() {\n    const $select = $('#scenario_sel');\n    const $option = $select.find('option:selected');\n\n    const $year = $('#scenario_begin');\n    const $npc = $('#scenario_npc');\n    const $npcEx = $('#scenario_npc_extend');\n    const $nation = $('#scenario_nation');\n\n    const scenario = $option.data('scenario') as ExpandedScenarioItem;\n    console.log(scenario.idx, scenario.title);\n\n    $year.html(`${scenario.year}년`);\n    $npc.html(`${scenario.npc_cnt}명`);\n    if (scenario.npcEx_cnt == 0) {\n        $npcEx.html('');\n    } else {\n        $npcEx.html(`+${scenario.npcEx_cnt}명`);\n    }\n\n    $nation.html('');\n    $.each(scenario.nation, function (idx, nation) {\n        $nation.append(`<span style=\"color:${nation.color}\">${nation.name}</span> ${nation.generals}명. ${nation.cities.join(', ')}<br>`);\n    });\n}\n\nconst descriptor: Rules = {\n    turnterm: {\n        required: true,\n        type: \"enum\",\n        enum: [1, 2, 5, 10, 20, 30, 60, 120],\n        transform: parseInt,\n    },\n    sync: {\n        required: true,\n        type: \"enum\",\n        enum: [1, 0],\n        transform: parseInt,\n    },\n    scenario: {\n        required: true,\n    },\n    fiction: {\n        required: true,\n        type: \"integer\",\n        transform: parseInt,\n    },\n    extend: {\n        required: true,\n        type: \"integer\",\n        transform: parseInt,\n    },\n    npcmode: {\n        required: true,\n        type: \"integer\",\n        transform: parseInt,\n    },\n    show_img_level: {\n        required: true,\n        type: \"integer\",\n        transform: parseInt,\n    },\n    tournament_trig: {\n        required: true,\n        type: \"integer\",\n        transform: parseInt,\n    },\n    join_mode: {\n        required: true,\n        type: \"enum\",\n        enum: [\"full\", \"onlyRandom\"]\n    },\n    autorun_user: {\n        type: 'array',\n        required: false,\n        defaultField: {\n            type: 'enum',\n            enum: ['develop', 'warp', 'recruit', 'recruit_high', 'train', 'battle', 'chief']\n        },\n    },\n    autorun_user_minutes: {\n        type: 'integer',\n        required: true,\n        transform: parseInt,\n        min: 0,\n        validator: (rule, value, _callback, source) => {\n            if(value == 0 && !source.autorun_user?.length){\n                return true;\n            }\n            if(value != 0 && source.autorun_user?.length){\n                return true;\n            }\n            return new Error('유효 시간과 옵션은 동시에 설정해야합니다.');\n        }\n    },\n    reserve_open: {\n        type: 'pattern',\n        pattern: new RegExp(/\\d{4,4}-\\d{2,2}-\\d{2,2} \\d{2,2}:\\d{2,2}/)\n    },\n    pre_reserve_open: {\n        type: 'pattern',\n        pattern: new RegExp(/\\d{4,4}-\\d{2,2}-\\d{2,2} \\d{2,2}:\\d{2,2}/)\n    }\n};\n\nfunction formSetup() {\n    const validator = new JQValidateForm($('#game_form'), descriptor);\n    validator.installChangeHandler();\n\n    $('#game_form').on('submit', async function (e) {\n        e.preventDefault();\n        const values = await validator.validate();\n        if (values === undefined) {\n            return;\n        }\n\n        let result: InvalidResponse;\n        try {\n            const response = await axios({\n                url: 'j_install.php',\n                method: 'post',\n                responseType: 'json',\n                data: convertFormData(values)\n            });\n            result = response.data;\n        }\n        catch (e) {\n            alert(`알수 없는 에러: ${e}`);\n            return;\n        }\n\n        if (!result.result) {\n            alert(result.reason);\n            return;\n        }\n\n        alert('게임이 리셋되었습니다.');\n        location.href = '..';\n    });\n}\n\n$(async function () {\n    setAxiosXMLHttpRequest();\n    void loadScenarios();\n    $('#scenario_sel').on('change', scenarioPreview);\n    formSetup();\n\n})\n\nwindow.$ = $;","import axios from \"axios\";\n\nexport function setAxiosXMLHttpRequest(): void{\n    axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n    //TODO: X-Requested-With 믿지 말자.\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 965;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t965: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhidche_lib\"] = self[\"webpackChunkhidche_lib\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], () => (__webpack_require__(7609)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","mergeKVArray","array","result","name","value","TypeError","length","slice","keyHead","push","JQValidateForm","target","rule","option","this","validator","inputs","find","removeClass","detach","on","validate","undefined","preParse","rawValues","serializeArray","postParse","optMap","Map","console","log","catch","fields","clearErrMsg","Object","keys","rawKey","$item","key","split","errMsg","message","has","get","$error","addClass","prop","$target","parents","insertAfter","parent","each","classList","add","validateResult","convertFormData","values","formData","FormData","simpleConv","v","toString","entries","arrKey","subValue","append","loadScenarios","url","method","responseType","response","data","alert","reason","list","pat","scenario","idx","title","categoryRes","exec","category","year","$select","items","$optgroup","attr","$option","val","html","trigger","scenarioPreview","$year","$npc","$npcEx","$nation","npc_cnt","npcEx_cnt","nation","color","generals","cities","join","descriptor","turnterm","required","type","enum","transform","parseInt","sync","fiction","extend","npcmode","show_img_level","tournament_trig","join_mode","autorun_user","defaultField","autorun_user_minutes","min","_callback","source","Error","reserve_open","pattern","RegExp","pre_reserve_open","formSetup","installChangeHandler","e","preventDefault","location","href","window","$","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}