(()=>{"use strict";var e,r={7609:(e,r,t)=>{t(5666),t(9826),t(2222),t(1058),t(4603),t(4916),t(9714),t(1539),t(8674),t(9720),t(2526),t(1817),t(2165),t(6992),t(8783),t(3948),t(7042),t(1038),t(7941),t(7327),t(5003),t(4747),t(9337);var n=t(9755),a=t.n(n),o=(t(3734),t(9669)),i=t.n(o),u=t(1469),l=t.n(u),c=(t(1532),t(3123),t(5715)),s=t(7037),f=t.n(s);function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d(e){var r,t={},n=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return p(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw o}}}}(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.name,i=a.value;if(!f()(o))throw new TypeError("".concat(o," is not string"));if(!f()(i))throw new TypeError("".concat(i," is not string"));if(""!==o&&"[]"!==o)if(o.length>2&&"[]"==o.slice(-2)){var u=o.slice(0,-2);u in t?t[u].push(i):t[u]=[i]}else t[o]=i}}catch(e){n.e(e)}finally{n.f()}return t}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function h(e,r,t,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void t(e)}u.done?r(l):Promise.resolve(l).then(n,a)}function y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(r,t,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=r,this.rule=t,this.option=n,this.validator=new c.Z(t),this.inputs=r.find(":input")}var r,t,n,o;return r=e,(t=[{key:"clearErrMsg",value:function(){this.inputs.removeClass("is-invalid"),this.inputs.removeClass("is-valid"),this.target.find(".invalid-feedback").detach()}},{key:"installChangeHandler",value:function(){var e=this;return this.inputs.on("change",(function(){e.validate()})),this}},{key:"validate",value:(n=regeneratorRuntime.mark((function e(){var r,t,n,o,i,u,c,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==(null===(r=this.option)||void 0===r?void 0:r.preParse)&&this.option.preParse(this.target),n=d(this.inputs.serializeArray()),void 0!==(null===(t=this.option)||void 0===t?void 0:t.postParse)?(i=this.option.postParse(n,this.target),p=2,u=function(e){if(Array.isArray(e))return e}(f=i)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(u)throw a}}return o}}(f,p)||function(e,r){if(e){if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,r):void 0}}(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=u[0],o=u[1]):o=new Map,console.log(n),e.next=6,this.validator.validate(n).catch((function(e){var r=e.fields;s.clearErrMsg();for(var t=0,i=Object.keys(r);t<i.length;t++){var u=i[t],c=void 0,f=u.split(".")[0];console.log("ErrorType: ".concat(f,":").concat(n[f]));var p=r[u][0].message;if(0!=(c=o.has(f)?s.target.find(o.get(f)):l()(n[f])?s.target.find(":input[name='".concat(f,"[]']")):s.target.find(":input[name='".concat(f,"']"))).length){var d=a()("<span>".concat(p,"</span>"));if(d.addClass("invalid-feedback"),"radio"==c.prop("type")){var v=c.parents(".btn-group");d.insertAfter(v),v.addClass("is-invalid")}else if("checkbox"==c.prop("type")){var h=c.parent("label");h.parent(".btn-group").length&&(h=h.parent(".btn-group")),d.insertAfter(h),h.addClass("is-invalid")}else d.insertAfter(c),c.addClass("is-invalid")}}s.inputs.each((function(){this.name in r||this.classList.add("is-valid")}))}));case 6:if(void 0!==(c=e.sent)){e.next=9;break}return e.abrupt("return",void 0);case 9:return this.clearErrMsg(),this.inputs.addClass("is-valid"),e.abrupt("return",c);case 12:case"end":return e.stop()}var f,p}),e,this)})),o=function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(e){h(o,t,a,i,u,"next",e)}function u(e){h(o,t,a,i,u,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})}])&&y(r.prototype,t),e}(),b=t(1584),g=t.n(b),w=t(1763),j=t.n(w);function O(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=x(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw o}}}}function x(e,r){if(e){if("string"==typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e){for(var r=new FormData,t=function(e){if(f()(e))return e;if(j()(e))return e.toString();if(g()(e))return e?"true":"false";if(null===e)return"";throw new TypeError("지원하지 않는 formData Type")},n=0,a=Object.entries(e);n<a.length;n++){var o=(v=a[n],h=2,function(e){if(Array.isArray(e))return e}(v)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(u)throw a}}return o}}(v,h)||x(v,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];if(l()(u)){var c,s="".concat(i,"[]"),p=O(u);try{for(p.s();!(c=p.n()).done;){var d=c.value;r.append(s,t(d))}}catch(e){p.e(e)}finally{p.f()}}else r.append(i,t(u))}var v,h;return r}function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){I(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function I(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function P(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(u)throw a}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return E(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function T(e,r,t,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void t(e)}u.done?r(l):Promise.resolve(l).then(n,a)}function C(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){T(o,n,a,i,u,"next",e)}function u(e){T(o,n,a,i,u,"throw",e)}i(void 0)}))}}function q(){return R.apply(this,arguments)}function R(){return(R=C(regeneratorRuntime.mark((function e(){var r,t,n,o,u,l,c,s,f,p,d,v,h,y,m,b,g,w,j,O,x,_,A,S,I,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({url:"j_load_scenarios.php",method:"post",responseType:"json"});case 3:t=e.sent,r=t.data,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),alert("시나리오를 불러오는데 실패했습니다.: ".concat(e.t0)),e.abrupt("return");case 11:if(r.result){e.next=14;break}return alert(r.reason),e.abrupt("return");case 14:for(n={},o=/【(.*?)[0-9\-_.a-zA-Z]*】/,u=0,l=Object.entries(r.scenario);u<l.length;u++)s=P(l[u],2),f=s[0],p=s[1],d=p.title||"-",v=o.exec(d),(h=v?v[1]:"-")in n||(n[h]={}),n[h][f]=k(k({},p),{},{title:d,category:h,idx:f,year:null!==(c=p.year)&&void 0!==c?c:180});for(y=a()("#scenario_sel"),m=0,b=Object.entries(n);m<b.length;m++){for(g=P(b[m],2),w=g[0],j=g[1],O=a()("<optgroup>").attr("label",w),x=0,_=Object.entries(j);x<_.length;x++)A=P(_[x],2),S=A[0],I=A[1],E=a()("<option>").data("scenario",I).val(S).html(I.title),O.append(E);y.append(O)}y.val(0),y.trigger("change");case 21:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(){var e=a()("#scenario_sel").find("option:selected"),r=a()("#scenario_begin"),t=a()("#scenario_npc"),n=a()("#scenario_npc_extend"),o=a()("#scenario_nation"),i=e.data("scenario");console.log(i.idx,i.title),r.html("".concat(i.year,"년")),t.html("".concat(i.npc_cnt,"명")),0==i.npcEx_cnt?n.html(""):n.html("+".concat(i.npcEx_cnt,"명")),o.html(""),a().each(i.nation,(function(e,r){o.append('<span style="color:'.concat(r.color,'">').concat(r.name,"</span> ").concat(r.generals,"명. ").concat(r.cities.join(", "),"<br>"))}))}var D={turnterm:{required:!0,type:"enum",enum:[1,2,5,10,20,30,60,120],transform:parseInt},sync:{required:!0,type:"enum",enum:[1,0],transform:parseInt},scenario:{required:!0},fiction:{required:!0,type:"integer",transform:parseInt},extend:{required:!0,type:"integer",transform:parseInt},npcmode:{required:!0,type:"integer",transform:parseInt},show_img_level:{required:!0,type:"integer",transform:parseInt},tournament_trig:{required:!0,type:"integer",transform:parseInt},join_mode:{required:!0,type:"enum",enum:["full","onlyRandom"]},autorun_user:{type:"array",required:!1,defaultField:{type:"enum",enum:["develop","warp","recruit","recruit_high","train","battle","chief"]}},autorun_user_minutes:{type:"integer",required:!0,transform:parseInt,min:0,validator:function(e,r,t,n){var a,o;return!(0!=r||null!==(a=n.autorun_user)&&void 0!==a&&a.length)||!(0==r||null===(o=n.autorun_user)||void 0===o||!o.length)||new Error("유효 시간과 옵션은 동시에 설정해야합니다.")}},reserve_open:{type:"pattern",pattern:new RegExp(/\d{4,4}-\d{2,2}-\d{2,2} \d{2,2}:\d{2,2}/)},pre_reserve_open:{type:"pattern",pattern:new RegExp(/\d{4,4}-\d{2,2}-\d{2,2} \d{2,2}:\d{2,2}/)}};function $(){var e=new m(a()("#game_form"),D);e.installChangeHandler(),a()("#game_form").on("submit",function(){var r=C(regeneratorRuntime.mark((function r(t){var n,a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.next=3,e.validate();case 3:if(void 0!==(n=r.sent)){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,r.next=9,i()({url:"j_install.php",method:"post",responseType:"json",data:A(n)});case 9:o=r.sent,a=o.data,r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(6),alert("알수 없는 에러: ".concat(r.t0)),r.abrupt("return");case 17:if(a.result){r.next=20;break}return alert(a.reason),r.abrupt("return");case 20:alert("게임이 리셋되었습니다."),location.href="..";case 22:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(e){return r.apply(this,arguments)}}())}a()(C(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i().defaults.headers.common["X-Requested-With"]="XMLHttpRequest",q(),a()("#scenario_sel").on("change",M),$();case 4:case"end":return e.stop()}}),e)})))),window.$=a()}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={id:e,loaded:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=r,e=[],n.O=(r,t,a,o)=>{if(!t){var i=1/0;for(s=0;s<e.length;s++){for(var[t,a,o]=e[s],u=!0,l=0;l<t.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](t[l])))?t.splice(l--,1):(u=!1,o<i&&(i=o));if(u){e.splice(s--,1);var c=a();void 0!==c&&(r=c)}}return r}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[t,a,o]},n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=965,(()=>{var e={965:0};n.O.j=r=>0===e[r];var r=(r,t)=>{var a,o,[i,u,l]=t,c=0;if(i.some((r=>0!==e[r]))){for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(l)var s=l(n)}for(r&&r(t);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[i[c]]=0;return n.O(s)},t=self.webpackChunkhidche_lib=self.webpackChunkhidche_lib||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var a=n.O(void 0,[216],(()=>n(7609)));a=n.O(a)})();
//# sourceMappingURL=install.js.map